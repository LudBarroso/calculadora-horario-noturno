<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8">
    <title>Calculadora de Horário Noturno – LudBarroso</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
  </head>

  <body style="background:#05060b;color:#f9fafb;font-family:system-ui,-apple-system,BlinkMacSystemFont,'Segoe UI',sans-serif;padding:24px;">

    <h1 style="font-size:24px;margin-bottom:8px;">Calculadora de Horário Noturno</h1>
    <p style="font-size:14px;color:#d1d5db;margin-bottom:16px;max-width:420px;">
      Informe o horário de entrada e a carga horária (em horas).
      A calculadora sugere o horário de saída, considerando hora reduzida
      de 52min30s a partir das 22h.
    </p>

    <div style="max-width:420px;background:#111827;border-radius:16px;padding:16px;border:1px solid #1f2937;">
      <div style="margin-bottom:12px;">
        <label for="entrada" style="display:block;font-size:14px;margin-bottom:4px;">Hora de entrada</label>
        <input id="entrada" type="time"
               style="width:100%;padding:10px 12px;border-radius:10px;border:1px solid #1f2937;background:#020617;color:#f9fafb;">
      </div>

      <div style="margin-bottom:12px;">
        <label for="carga" style="display:block;font-size:14px;margin-bottom:4px;">Carga horária (em horas)</label>
        <input id="carga" type="number" placeholder="Ex: 8"
               style="width:100%;padding:10px 12px;border-radius:10px;border:1px solid #1f2937;background:#020617;color:#f9fafb;">
      </div>

      <button onclick="calcularSaida()"
              style="width:100%;padding:11px 16px;border-radius:999px;border:none;
                     background:linear-gradient(135deg,#2563eb,#4f46e5);
                     color:#fff;font-size:15px;font-weight:600;letter-spacing:.05em;text-transform:uppercase;cursor:pointer;">
        Calcular saída
      </button>

      <p id="erro" style="margin-top:10px;font-size:12px;color:#f97373;"></p>

      <div id="resultado"
           style="display:none;margin-top:14px;padding:12px;border-radius:12px;background:#020617;border:1px solid #1f2937;font-size:14px;line-height:1.6;">
      </div>

      <p style="margin-top:12px;font-size:11px;color:#9ca3af;text-align:center;">
        Criado por <span style="color:#c4b5fd;">LudBarroso</span>
      </p>
    </div>

    <script>
      function calcularSaida() {
        const entrada = document.getElementById("entrada").value;
        const carga = parseFloat(document.getElementById("carga").value);
        const erroEl = document.getElementById("erro");
        const resEl = document.getElementById("resultado");

        erroEl.textContent = "";
        resEl.style.display = "none";
        resEl.textContent = "";

        if (!entrada || !carga || carga <= 0) {
          erroEl.textContent = "Preencha a hora de entrada e a carga horária (maior que zero).";
          return;
        }

        const partes = entrada.split(":");
        const h = parseInt(partes[0], 10);
        const m = parseInt(partes[1], 10);
        const inicioMin = h * 60 + m;

        const totalLegal = carga * 60;   // minutos "legais"
        const nightStart = 22 * 60;      // 22:00

        let endMin;

        if (inicioMin >= nightStart) {
          // Entrou já no período noturno: tudo com hora reduzida
          const reaisNoturnos = totalLegal * (52.5 / 60);
          endMin = inicioMin + reaisNoturnos;
        } else {
          const minutosAte22 = nightStart - inicioMin;

          if (totalLegal <= minutosAte22) {
            // Termina antes das 22h: tudo normal
            endMin = inicioMin + totalLegal;
          } else {
            // Parte normal até 22h + parte noturna reduzida
            const legalNoturno = totalLegal - minutosAte22;
            const reaisNoturnos = legalNoturno * (52.5 / 60);
            endMin = nightStart + reaisNoturnos;
          }
        }

        endMin = endMin % (24 * 60);

        let saidaH = Math.floor(endMin / 60);
        let saidaM = Math.round(endMin % 60);

        if (saidaM === 60) {
          saidaM = 0;
          saidaH = (saidaH + 1) % 24;
        }

        const saidaHStr = String(saidaH).padStart(2, "0");
        const saidaMStr = String(saidaM).padStart(2, "0");

        resEl.style.display = "block";
        resEl.innerHTML =
          "⏱ <strong>Saída sugerida:</strong> " + saidaHStr + ":" + saidaMStr +
          "<br><small>Hora reduzida aplicada a partir das 22h até o fim da jornada.</small>";
      }
    </script>

  </body>
</html>
