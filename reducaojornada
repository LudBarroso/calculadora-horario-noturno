<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Calculadora de Horário Noturno – LudBarroso</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    *{box-sizing:border-box;margin:0;padding:0}
    body{
      font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;
      background:#05060b;
      color:#f9fafb;
      display:flex;
      justify-content:center;
      padding:20px 12px;
    }
    .app{
      width:100%;
      max-width:420px;
      background:#111827;
      border-radius:22px;
      padding:18px 16px 20px;
      box-shadow:0 18px 45px rgba(0,0,0,.7);
      border:1px solid rgba(148,163,184,.3);
    }
    h1{
      font-size:20px;
      margin-bottom:4px;
    }
    .sub{
      font-size:13px;
      color:#9ca3af;
      margin-bottom:12px;
      line-height:1.5;
    }
    .field{
      margin-bottom:10px;
    }
    label{
      font-size:13px;
      margin-bottom:4px;
      display:block;
    }
    input{
      width:100%;
      padding:10px 12px;
      border-radius:999px;
      border:1px solid #1f2937;
      background:#020617;
      color:#f9fafb;
      font-size:14px;
    }
    input::placeholder{color:#6b7280}
    button{
      width:100%;
      margin-top:6px;
      padding:11px 16px;
      border-radius:999px;
      border:none;
      background:linear-gradient(135deg,#2563eb,#4f46e5);
      color:#fff;
      font-size:15px;
      font-weight:600;
      letter-spacing:.06em;
      text-transform:uppercase;
      cursor:pointer;
      box-shadow:0 12px 28px rgba(37,99,235,.6);
    }
    button:active{transform:translateY(1px);box-shadow:0 8px 18px rgba(37,99,235,.5)}
    .error{
      margin-top:8px;
      font-size:12px;
      color:#f97373;
    }
    .result{
      margin-top:12px;
      padding:10px 12px;
      border-radius:16px;
      background:#020617;
      border:1px solid #1f2937;
      font-size:13px;
      line-height:1.5;
    }
    .footer{
      margin-top:10px;
      font-size:11px;
      text-align:center;
      color:#6b7280;
    }
    .footer span{color:#c4b5fd;font-weight:500}
  </style>
</head>
<body>
  <div class="app">
    <h1>Calculadora de Horário Noturno</h1>
    <p class="sub">
      Informe o horário de entrada e a carga horária da jornada.
      A saída será calculada considerando hora reduzida de 52min30s
      a partir das 22h até o fim da jornada.
    </p>

    <div class="field">
      <label for="entrada">Hora de entrada</label>
      <input type="time" id="entrada">
    </div>

    <div class="field">
      <label for="carga">Carga horária desejada (em horas)</label>
      <input type="number" id="carga" placeholder="Ex: 8">
    </div>

    <button onclick="calcularSaida()">Calcular horário de saída</button>

    <div id="erro" class="error"></div>
    <div id="resultado" class="result" style="display:none;"></div>

    <div class="footer">
      Criado por <span>LudBarroso</span>
    </div>
  </div>

  <script>
    function calcularSaida() {
      const entrada = document.getElementById("entrada").value;
      const carga = parseFloat(document.getElementById("carga").value);
      const erroEl = document.getElementById("erro");
      const resEl = document.getElementById("resultado");

      erroEl.textContent = "";
      resEl.style.display = "none";
      resEl.textContent = "";

      if (!entrada || !carga || carga <= 0) {
        erroEl.textContent = "Preencha a hora de entrada e a carga horária (maior que zero).";
        return;
      }

      // hora de entrada em minutos
      const [h, m] = entrada.split(":").map(Number);
      const inicioMin = h * 60 + m;

      const totalLegal = carga * 60;       // minutos "legais" contratados
      const nightStart = 22 * 60;          // 22:00 em minutos (1320)

      let endMin;

      if (inicioMin >= nightStart) {
        // entrou já no período noturno → toda jornada com hora reduzida
        const reaisNoturnos = totalLegal * (52.5 / 60);
        endMin = inicioMin + reaisNoturnos;
      } else {
        // entrou antes das 22h
        const minutosAte22 = nightStart - inicioMin;

        if (totalLegal <= minutosAte22) {
          // jornada termina antes das 22h → tudo normal
          endMin = inicioMin + totalLegal;
        } else {
          // parte diurna até 22h + parte noturna com hora reduzida
          const legalNoturno = totalLegal - minutosAte22;
          const reaisNoturnos = legalNoturno * (52.5 / 60);
          endMin = nightStart + reaisNoturnos;
        }
      }

      // ajustar se passar de 24h
      endMin = endMin % (24 * 60);

      let saidaH = Math.floor(endMin / 60);
      let saidaM = Math.round(endMin % 60);

      if (saidaM === 60) {
        saidaM = 0;
        saidaH = (saidaH + 1) % 24;
      }

      const saidaHStr = String(saidaH).padStart(2, "0");
      const saidaMStr = String(saidaM).padStart(2, "0");

      resEl.style.display = "block";
      resEl.innerHTML =
        <strong>⏱ Horário sugerido de saída:</strong> ${saidaHStr}:${saidaMStr}<br> +
        <small>Considerando hora reduzida de 52min30s a partir das 22:00 até o fim da jornada.</small>;
    }
  </script>
</body>
</html>
